{var component={name:"show_points",version:[1,0,0],ccm:{url:"https://ccmjs.github.io/ccm/versions/ccm-16.1.0.min.js",integrity:"sha384-4X0IFdACgz2SAKu0knklA+SRQ6OVU4GipKhm7p6l7e7k/CIM8cjCFprWmM4qkbQz",crossorigin:"anonymous"},config:{html:{id:"main",inner:[{id:"header",inner:"Point list of %user%"},{id:"point_list"},{id:"footer",inner:"Sum of points: %points%"}]},store:["ccm.store"],moment:["ccm.load","https://ccmjs.github.io/akless-components/libs/moment/moment.js"],mapping:{},message:"Nothing to display."},Instance:function(){const self=this;let my;let $;const points=[];this.init=(callback=>{$=self.ccm.helper;my=$.privatize(self);callback()});this.start=(callback=>{const user=self.user&&self.user.isLoggedIn()?self.user.data().user:my.user;my.store.get({_id:{$regex:"^"+user+","}},solutions=>{if(!Array.isArray(solutions)||solutions.length===0){$.setContent(self.element,my.message);return callback&&callback()}let sum=0;solutions.map(solution=>{const task=solution.key[1];if(solution.key[0]!==user||!my.mapping[task]||!solution.created_at)return;const task_points=!my.mapping[task].deadline||moment(my.mapping[task].deadline).isAfter(solution.created_at)?my.mapping[task].points:0;points.push([task,task_points]);sum+=task_points});$.setContent(self.element,$.html(my.html,{user:user,points:sum.toString()}));my.target.start({root:self.element.querySelector("#point_list"),data:points,table_head:["task","points"]},()=>callback&&callback())})});this.getValue=(()=>$.clone(points))}};function p(){window.ccm[v].component(component)}const f="ccm."+component.name+(component.version?"-"+component.version.join("."):"")+".js";if(window.ccm&&null===window.ccm.files[f])window.ccm.files[f]=component;else{const n=window.ccm&&window.ccm.components[component.name];n&&n.ccm&&(component.ccm=n.ccm),"string"==typeof component.ccm&&(component.ccm={url:component.ccm});var v=component.ccm.url.split("/").pop().split("-");if(v.length>1?(v=v[1].split("."),v.pop(),"min"===v[v.length-1]&&v.pop(),v=v.join(".")):v="latest",window.ccm&&window.ccm[v])p();else{const e=document.createElement("script");document.head.appendChild(e),component.ccm.integrity&&e.setAttribute("integrity",component.ccm.integrity),component.ccm.crossorigin&&e.setAttribute("crossorigin",component.ccm.crossorigin),e.onload=function(){p(),document.head.removeChild(e)},e.src=component.ccm.url}}}